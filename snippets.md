git
---

List of the files in a repository, ordered by size:
```
git rev-list --objects --all \
| git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' \
| sed -n 's/^blob //p' \
| sort --numeric-sort --key=2 \
| cut -c 1-12,41- \
| $(command -v gnumfmt || echo numfmt) --field=2 --to=iec-i --suffix=B --padding=7 --round=nearest
```

recover damaged dvd/bluray
--------------------------

`ddrescue` is a power tool that can clone a disk in block mode, allowing to retry only the parts that are not readable.
```
sudo apt install gddrescue
```
this will backup a disc from device /dev/sr0, creating the image and the map file, that is used for resuming/retrying
```
cd backup_folder
ddrescue -n -b2048  /dev/sr0 disc_image disc_mapfile
```
then if the recovery is not 100% complete it's possible to iterate (several times) with the following:
```
ddrescue -d -r1 -b2048  /dev/sr0 disc_image disc_mapfile
```
that will update the image retrying on the parts that had errors.

The image can then be mounted using for example:
```
sudo mount -o loop disc_image /mnt
```


makemkv linux
-------------

use docker image `jlesage/makemkv`:
```
docker run --rm -d --name=makemkv -p 5800:5800 \
    -v /docker/appdata/makemkv:/config:rw \
    -v $HOME:/storage:ro \
    -v $HOME/MakeMKV/output:/output:rw \
    --device /dev/sr0 \
    --device /dev/sg0 \
    jlesage/makemkv
```
and then open a browser on `localhost:5800` for the UI.
`/dev/sr0` and `/dev/sg0` are the devices representing the BD-rom

### damaged discs
To backup a damaged disk, use ddrescue with the instructions above, then:
* Start a backup, uncheck the decrypt option. Let it run until it gets to the first m2ts file, then you can cancel. At that point, it has saved the disc code, which is a file called "discatt.dat".
* mount the image generated by ddrescue into /mnt (or anywhere)
* copy the `BDMV` folder from the mounted image to the backup folder
* in MakeMKV, select File>Open Files and navigate to and double click the `discatt.dat` file


terminal without a title bar in Ubuntu 20.04
--------------------------------------------
use the instructions here: https://github.com/pixel-saver/pixel-saver

