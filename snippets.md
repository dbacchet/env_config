git
---

List of the files in a repository, ordered by size:
```
git rev-list --objects --all \
| git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' \
| sed -n 's/^blob //p' \
| sort --numeric-sort --key=2 \
| cut -c 1-12,41- \
| $(command -v gnumfmt || echo numfmt) --field=2 --to=iec-i --suffix=B --padding=7 --round=nearest
```

recover damaged dvd/bluray
--------------------------

`ddrescue` is a power tool that can clone a disk in block mode, allowing to retry only the parts that are not readable.
```
sudo apt install gddrescue
```
this will backup a disc from device /dev/sr0, creating the image and the map file, that is used for resuming/retrying
```
cd backup_folder
ddrescue -n -b2048  /dev/sr0 disc_image disc_mapfile
```
then if the recovery is not 100% complete it's possible to iterate (several times) with the following:
```
ddrescue -d -r1 -b2048  /dev/sr0 disc_image disc_mapfile
```
that will update the image retrying on the parts that had errors.

The image can then be mounted using for example:
```
sudo mount -o loop disc_image /mnt
```


makemkv linux
-------------

use docker image `jlesage/makemkv`:
```
docker run --rm -d --name=makemkv -p 5800:5800 \
    -v /docker/appdata/makemkv:/config:rw \
    -v $HOME:/storage:ro \
    -v $HOME/MakeMKV/output:/output:rw \
    --device /dev/sr0 \
    --device /dev/sg0 \
    jlesage/makemkv
```
and then open a browser on `localhost:5800` for the UI.
`/dev/sr0` and `/dev/sg0` are the devices representing the BD-rom

### damaged discs
To backup a damaged disk, use ddrescue with the instructions above, then:
* Start a backup, uncheck the decrypt option. Let it run until it gets to the first m2ts file, then you can cancel. At that point, it has saved the disc code, which is a file called "discatt.dat".
* mount the image generated by ddrescue into /mnt (or anywhere)
* copy the `BDMV` folder from the mounted image to the backup folder
* in MakeMKV, select File>Open Files and navigate to and double click the `discatt.dat` file


terminal without a title bar in Ubuntu 20.04
--------------------------------------------
use the instructions here: https://github.com/pixel-saver/pixel-saver


How to Fix the Home and End Buttons for an External Keyboard in Mac
-------------------------------------------------------------------

(from [this medium article](https://medium.com/@elhayefrat/how-to-fix-the-home-and-end-buttons-for-an-external-keyboard-in-mac-4da773a0d3a2))
if you are a seasoned Mac user, you will know that the shortcut keys “Command + Left arrow” and “Command + Right arrow” move the cursor to the start and end of the line respectively. However, if you use a full-size external keyboard for your Mac, you will find that the “Home” and “End” buttons aren’t working properly. In fact, they are not working at all since Apple doesn’t bind the buttons to any function.
If you want to fix the “Home” and “End” buttons, here is a quick tip to get them working again the way they should.
1. Open a terminal. You can access it from the Launchpad.
2. Type the following commands (and press Enter after each line):
    sudo bash 
    mkdir -p ~/Library/KeyBindings ; cd ~/Library/KeyBindings
    vim DefaultKeyBinding.dict
    What the above commands do is create a new “KeyBindings” folder in the “Library” folder and add a new “DefaultKeyBinding.dict” file.
3. In the text editor that opens, copy and paste the following commands to it:
```
{
/* Remap Home / End keys */
/* Home Button*/
"\UF729" = "moveToBeginningOfLine:"; 
/* End Button */
"\UF72B" = "moveToEndOfLine:"; 
/* Shift + Home Button */
"$\UF729" = "moveToBeginningOfLineAndModifySelection:"; 
/* Shift + End Button */
"$\UF72B" = "moveToEndOfLineAndModifySelection:"; 
/* Ctrl + Home Button */
"^\UF729" = "moveToBeginningOfDocument:"; 
/* Ctrl + End Button */
"^\UF72B" = "moveToEndOfDocument:"; 
 /* Shift + Ctrl + Home Button */
"$^\UF729" = "moveToBeginningOfDocumentAndModifySelection:";
/* Shift + Ctrl + End Button*/
"$^\UF72B" = "moveToEndOfDocumentAndModifySelection:"; 
}
```
4. Save and restart your Mac. The “Home” and “End” should be working now, and you can use it in conjunction with the “Shift” and “Ctrl” modifier buttons.
